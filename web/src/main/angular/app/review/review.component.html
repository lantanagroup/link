<div class="card">
    <div class="card-header">Filter/Criteria</div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-2">
                <label>Report Type</label>
                <div ngbDropdown>
                    <button class="btn btn-outline-primary" id="measures" ngbDropdownToggle>{{filter.measure}}</button>
                    <div ngbDropdownMenu aria-labelledby="measures">
                        <div *ngFor="let measure of measures">
                            <button class="dropdown-item"
                                    id="measureOption" on-click="selectMeasure(measure.name)">{{measure.name}}
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <label>Reporting Period (Start Date - End Date) </label>
                <ngbd-datepicker-range-popup #reportingdate
                                             (change)="selectPeriod($event)"></ngbd-datepicker-range-popup>
            </div>
            <div class="col-md-2">
                <label>Status</label>
                <div ngbDropdown>
                    <button class="btn btn-outline-primary" id="status" ngbDropdownToggle>{{filter.status}}</button>
                    <div ngbDropdownMenu aria-labelledby="status">
                        <div *ngFor="let status of statuses">
                            <button class="dropdown-item" on-click="selectStatus(status.name)">{{status.name}} </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <label>Submitted Date</label>
                <form class="form-inline" #f="ngForm">
                    <div class="form-group">
                        <div class="input-group">
                            <input [(ngModel)]="filter.submittedDate" class="form-control" placeholder="YYYY-MM-DD"
                                   name="dp" (ngModelChange)="selectSubmittedDate()" ngbDatepicker #d="ngbDatepicker">
                            <div class="input-group-append">
                                <button (click)="d.toggle()" class="btn btn-outline-secondary calendar"
                                        type="button"></button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="col-md-2">
                <label>Submitter</label>
                <div ngbDropdown>
                    <button class="btn btn-outline-primary" id="submitter"
                            ngbDropdownToggle>{{filter.submitter}}</button>
                    <div ngbDropdownMenu aria-labelledby="submitter">
                        <div *ngFor="let submitter of submitters">
                            <button class="dropdown-item"
                                    on-click="selectSubmitter(submitter.name)">{{submitter.name}}</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row" style="margin-top: 10px;">
            <div class="col-md-2">
                <button class="btn btn-primary" on-click="resetFilters(reportingdate)">Reset Filters</button>
            </div>
        </div>
    </div>
</div>

<table class="table table-striped column-bordered-table">
    <thead>
    <tr>
        <th>Measure</th>
        <th>Reporting Period</th>
        <th>Status</th>
        <th>Submitted Date</th>
        <th>Submitter</th>
        <th>Notes</th>
        <th>&nbsp;</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let report of reports">
        <td>
            {{getMeasureName(report.measureIdentifier)}}
        </td>
        <td style="min-width: 16rem">
            {{report.periodStartDate | date:'MMM d, y' :"UTC"}}
        </td>
        <td>
            {{getStatusName(report.docStatus)}}
        </td>
        <td style="min-width: 16rem">
            <span [ngbTooltip]="report.submittedDate | date: 'MMM d, y, h:mm:ss a': 'UTC'">{{report.submittedDate | date:'MMM d, y' :"UTC"}}</span>
        </td>
        <td>
            {{getSubmitterName(report.author)}}
        </td>
        <td>
            <span class="message">{{getNote(report.note)}}</span><i *ngIf="report.note?.length>50"
                                                                    [ngbTooltip]="report.note"
                                                                    class="fa fa-sticky-note"></i>
        </td>
        <td class="button">
            <button class="btn btn-primary" on-click="displayReport(report.id)">{{getLabel(report.docStatus)}}</button>
        </td>
    </tr>
    </tbody>
    <tfoot>
    <tr>
        <td colspan="7" *ngIf="totalSize === 0">
            <div class="alert alert-info">No reports to review.</div>
        </td>
    </tr>
    <tr>
        <td colspan="7">
            <ngb-pagination class="d-flex justify-content-center"
                            [maxSize]="5"
                            (pageChange)="onPageChange($event)"
                            [(page)]="page"
                            [pageSize]="pageSize"
                            [boundaryLinks]="true"
                            [collectionSize]="totalSize">
            </ngb-pagination>
        </td>
    </tr>
    </tfoot>
</table>



